(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1214:function(e,t,o){"use strict";var d=o(10),n=o(3),l=(o(5),o(6),o(32),o(18),o(95),o(478),o(479),o(480),o(481),o(482),o(483),o(484),o(485),o(486),o(487),o(488),o(489),o(490),o(793),o(33),o(0)),r=o(2),c=o(72),v=o(109),y=o(8),m=new y.a("AvPluginsTitlePanel"),h=class extends r.Vue{constructor(){super(...arguments),this.ended=!1,this.playbackStarted=!1,this.touchMoving=!1}get videoDuration(){return this.$video.getDuration(this.video)}get videoImageUrl(){return this.$video.getImageUrl(this.video)}get videoTitle(){return this.$video.getTitle(this.video)}created(){this.preloadImage&&this.$scripts.addLink({tagId:"preload-video-".concat(this.video.id,"-image"),rel:"preload",as:"image",href:this.videoImageUrl,fetchpriority:"high",priority:50}).catch((e=>m.log(e)))}};Object(l.c)([Object(r.Prop)({default:!1,type:Boolean}),Object(l.f)("design:type",Boolean)],h.prototype,"showTitlePanel",void 0),Object(l.c)([Object(r.Prop)({default:()=>{},type:Object}),Object(l.f)("design:type",Object)],h.prototype,"video",void 0),Object(l.c)([Object(r.Prop)({default:!1}),Object(l.f)("design:type",Boolean)],h.prototype,"preloadImage",void 0);var C=h=Object(l.c)([r.Component],h),f=(o(1469),o(7)),P=Object(f.a)(C,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("transition",{attrs:{name:"c-avPluginsTitlePanel"}},[o("div",{staticClass:"c-avPluginsTitlePanel"},[o("img",{staticClass:"c-avPluginsTitlePanel_image",attrs:{src:e.videoImageUrl,alt:e.videoTitle,"data-role":"imageSource"}}),e._v(" "),o("div",{staticClass:"c-avPluginsTitlePanel_background"},[o("div",{staticClass:"c-avPluginsTitlePanel_container g-inner-spacing-all-xlarge"},[e._t("c-avPluginsTitlePanel_title",(function(){return[o("div",{staticClass:"c-avPluginsTitlePanel_title g-outer-spacing-bottom-xxsmall"},[o("span",{staticClass:"g-text-extrabold g-text-xxlarge"},[e._v(e._s(e.videoTitle))])])]})),e._v(" "),e._t("c-avPluginsTitlePanel_duration",(function(){return[o("div",{staticClass:"c-avPluginsTitlePanel_duration g-outer-spacing-bottom-large-fluid"},[o("span",{staticClass:"g-text-xsmall"},[e._v(e._s(e.videoDuration))])])]})),e._v(" "),o("div",{staticClass:"c-avPluginsTitlePanel_play",on:{click:function(t){return e.$emit("click")}}},[e._t("c-avPluginsTitlePanel_play",(function(){return[o("a",{staticClass:"g-text-bold"},[o("svg",{staticClass:"c-play_icon"},[o("use",{attrs:{"xlink:href":"#play"}})]),e._v(" "),o("span",{staticClass:"g-color-white g-text-xsmall"},[e._v(e._s(e.$t("watch_now")))])])]}))],2)],2)])])])}),[],!1,null,null,null).exports,E=o(93),V=o(1470),I=o.n(V),w=o(124),x=o(14);function k(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function S(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(t){Object(d.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var T=new y.a("AvVideo"),A=class extends r.Vue{constructor(){super(...arguments),this.ampIntegration=null,this.enabled=!0,this.isAd=!1,this.isAutoplay=!1,this.isPaused=!1,this.playbackStarted=!1,this.playbackComplete=!1,this.playerInitializing=!1,this.playerCreated=!1,this.$_player=null,this.playerId=Object(c.v4)(),this.playlistEndTimeout=null,this.showUnmuteButton=!1}onVideoChanged(e,t){T.log("onVideoChanged"),(null==e?void 0:e.id)!==(null==t?void 0:t.id)&&(this.$_player?(this.$_player.destroyPlaylist(),setTimeout((()=>{var e,t=this.$video.getResourceConfig(this.video);null===(e=this.$_player)||void 0===e||e.loadAndPlayResource(t)}),50)):this.playVideo())}get containerId(){return"container_"+this.playerId}get isAmpIframe(){return window.location.hash.includes("amp=1")}get showTitleOverlay(){return this.playbackStarted&&this.isPaused&&!this.isAd}get showTitlePanel(){return!this.playbackStarted&&!this.isAutoplay||this.playbackComplete}get videoHeadline(){var e;return(null===(e=this.$store.getters["video/data"])||void 0===e?void 0:e.headline)||""}get posterImage(){return this.$video.getImageUrl(this.video)}get mediaSessionMetadata(){return{title:this.$video.getTitle(this.video),artist:this.videoArtistName||x.site.toUpperCase(),artwork:[{src:this.posterImage,sizes:"512x512",type:"image/png"},{src:this.posterImage,sizes:"512x512",type:"image/jpg"}]}}beforeCreate(){this.$store.commit("video/hasVideo",!0)}beforeMount(){this.initializeOnLoad&&!this.video.jwPlayerId&&this.$video.setup().catch((e=>{this.enabled=!1,T.error(e),this.$sentry&&"function"==typeof this.$sentry.captureException&&this.$sentry.captureException(e)}))}head(){if(this.$store.hasModule("format")&&this.$store.getters["format/isAmp"]&&this.video)return{script:[{async:!0,"custom-element":"amp-video-iframe",hid:"amp-video-iframe",src:"https://cdn.ampproject.org/v0/amp-video-iframe-0.1.js",once:!0}]}}mounted(){var e=this;return Object(n.a)((function*(){T.log("video",e.video),e.isAutoplay=yield e.$video.setupAutoplay(e.autoplay);try{!e.lazy&&e.initializeOnLoad&&e.initialize()}catch(t){T.error("error loading scripts",t),e.$sentry&&"function"==typeof e.$sentry.captureException&&e.$sentry.captureException(t)}e.isAmpIframe&&(window.AmpVideoIframe=window.AmpVideoIframe||[]).push((t=>{e.ampIntegration=t}))}))()}beforeDestroy(){this.removePlayer()}initialize(){var e=this;return Object(n.a)((function*(){if(T.log("initalize video id:",e.video.id),yield e.$video.setup(),e.enabled){var t=document.getElementById("".concat(e.containerId));if(e.video.jwPlayerId)window.loadPlayer({contextName:"tvguide",mediaId:e.video.jwPlayerId,embedHtmlElement:t,autoIncrementJwPlayerContainerId:!0,autoPlay:e.autoplay});else try{window.uvpjs.getVideoManager().createVideoPlayer(e.containerId,e.setupPlayer,{enableMutedAutoplay:!e.initializeOnLoad||e.isAutoplay,enableUnmutedAutoplay:!e.initializeOnLoad,previewImage:"",deferLoadingCaptions:!1})}catch(e){T.log("UVP create error:",e)}}}))()}getAmpTracking(e){var t=window.uvpjs.getVideoManager().currActiveVCI,o=this.$video.getResourceConfig(this.video),d=S(S({},null==e?void 0:e.videoContext),{},{adEnabled:!1!==o.adCall,brand:this.$store.getters["tracking/dataByKey"]("brand"),category:this.$store.getters["tracking/dataByKey"]("topicSlugs").join(),method:null==e?void 0:e.method,pauseType:null==e?void 0:e.pauseType,previousVolumeLevel:null==e?void 0:e.previousVolumeLevel,referrer:window.document.referrer,sponsored:!1,tags:JSON.stringify(null==e?void 0:e.videoContext.tags),userAgent:window.navigator.userAgent,videoMuted:t.getPlayerMuted()});return this.isAd&&(d=S(S(S({},d),null==e?void 0:e.videoAdContext),{},{videoAdMuted:t.getPlayerMuted(),videoAdWatchedTime:null==e?void 0:e.videoAdWatchedTime,videoAdWatched:null==e?void 0:e.videoAdWatched})),d}pauseVideo(){this.$_player.pauseVideo()}playVideo(){var e=this;return Object(n.a)((function*(){var t;if(e.initializeOnLoad||(yield e.initialize()),e.playbackStarted)e.playbackComplete=!1,null===(t=e.$_player)||void 0===t||t.replayVideo();else{e.playbackStarted=!0,e.playerInitializing=!0;var o=document.querySelector("#".concat(e.containerId," .uvpjs__btn-preview"));null==o||o.dispatchEvent(new Event("touchstart")),null==o||o.dispatchEvent(new Event("touchend"))}}))()}setupPlayer(e){e.uuid=this.playerId,this.$_player=e,T.log("setupPlayer: playerCreated",this.$_player),this.setupEvents(this.$_player);var t=this.$video.getResourceConfig(this.video);T.log("myResource",t),this.$_player.loadAndPlayResource(t),this.$store.commit("video/addPlayer",this.containerId),this.$store.commit("video/setVideo",this.video),this.$nuxt.$emit("video-player-created",this.$_player),this.$store.dispatch("video/updatePlayerState",{player:this.containerId}),this.$_player.setPageContextMetadata(this.$video.getHbParams()),I.a.trackUVP(this.containerId),document.getElementById(this.containerId).addEventListener("stateChange-"+this.containerId,(e=>{var t,o,d,n;if((null===(t=e.detail)||void 0===t?void 0:t.payload)&&this.isAmpIframe&&(null===(o=e.detail)||void 0===o?void 0:o.payload["@type"]))try{var l=null===(d=e.detail)||void 0===d?void 0:d.payload["@type"].match(/.*.video(.*).v\d/),r="video-custom"+w.a.fromCamelCase(l[1]);this.ampIntegration.postAnalyticsEvent(r,this.getAmpTracking(null===(n=e.detail)||void 0===n?void 0:n.payload))}catch(e){T.error(e)}})),this.setupVideoMetadata(),this.setupOsPlayerControls(),this.onPlayerCreated()}onPlayerCreated(){this.playerCreated=!0,this.$emit("player-created",this.containerId)}setupEvents(e){var t=this;T.log("setupEvents");var o=window.uvpjs.EventType,d=function(d){e.addEventListener(o[d]+".AvVideo"+e.uuid,(e=>{var n,l,r,c;if(e.target===t.containerId){switch(["onVideoLoading","onVideoProgress"].includes(e.type)||T.log("Event",o[d],e),e.type){case E.c.AD_LOADED:t.isAd=!0,t.$store.dispatch("video/updatePlayerState",{isAd:!0,videoState:E.d.ADLOADED});break;case E.c.AD_START:t.isAd=!0,t.$store.dispatch("video/updatePlayerState",{isAd:!0,videoState:E.d.UNPLAYED}),t.updateMetadata({title:t.videoArtistName||x.site.toUpperCase(),artist:t.videoArtistName||x.site.toUpperCase()});break;case E.c.AD_END:t.isAd=!1,t.$store.dispatch("video/updatePlayerState",{isAd:!1});break;case E.c.CONTENT_START:t.$store.dispatch("video/updatePlayerState",{contentStartTime:(new Date).getTime(),videoState:E.d.PLAYED,isAd:!1}),t.updateMetadata(t.mediaSessionMetadata);break;case E.c.CONTROL_MUTE:t.$store.dispatch("video/updatePlayerState",{videoState:E.d.MUTED}),t.showUnmuteButton=!1;break;case E.c.CONTROL_UNMUTE:t.$store.dispatch("video/updatePlayerState",{videoState:E.d.UNMUTED}),t.showUnmuteButton=!1;break;case E.c.RESOURCE_START:clearTimeout(t.playlistEndTimeout),t.$store.commit("video/setVideo",null===(l=null===(n=e.payload)||void 0===n?void 0:n.rco)||void 0===l?void 0:l.videoData);break;case E.c.RESOURCE_END:t.$store.dispatch("video/updatePlayerState",{videoState:E.d.COMPLETED,isAd:t.isAd}),0===(null===(r=e.payload)||void 0===r?void 0:r.playlistLength)&&(t.playlistEndTimeout=setTimeout((()=>{if(document.fullscreenElement){var e=document.querySelector("#".concat(t.containerId," .uvpjs__btn-fullscreen"));e&&e.dispatchEvent(new Event("touchend"))}t.playbackComplete=!0}),250));break;case E.c.VIDEO_STATE_CHANGE:switch(e.payload.newState>0&&(t.playbackComplete=!1),t.isPaused=2===e.payload.newState,e.payload.newState){case 1:t.playerInitializing=!1,t.playbackStarted?t.isAd||(t.updateMetadata(t.mediaSessionMetadata),t.setupOsPlayerControls()):(t.playbackStarted=!0,(null===(c=t.$_player)||void 0===c?void 0:c.getPlayerMuted())&&(t.showUnmuteButton=!0)),t.$store.dispatch("video/updatePlayerState",{videoState:E.d.PLAYING});break;case 2:t.$store.dispatch("video/updatePlayerState",{videoState:E.d.STOPPED})}}}}))};for(var n in o)d(n)}removePlayer(){try{T.log("removePlayer"),this.$_player&&(T.log("removing video player",this.containerId),I.a.removeUVPTracking(this.containerId),this.$video.destroyPlayer(this.containerId),this.$store.dispatch("video/removePlayer",this.containerId),this.$_player=null,this.$destroy())}catch(e){T.error("Error removing player:",e)}}unmuteVideo(){this.$_player.unMute(),this.showUnmuteButton=!1}setupVideoMetadata(){if("mediaSession"in navigator){T.log("mediaSession supported, setting metadata.");try{navigator.mediaSession.metadata=new MediaMetadata(this.mediaSessionMetadata)}catch(e){T.log("mediaSession metadata could not be set:",e)}}}updateMetadata(details){"mediaSession"in navigator&&navigator.mediaSession.metadata&&(details.title&&(navigator.mediaSession.metadata.title=details.title),details.artist&&(navigator.mediaSession.metadata.artist=details.artist),details.artwork&&(navigator.mediaSession.metadata.artwork=details.artwork))}setupOsPlayerControls(){if("mediaSession"in navigator){var e=new Map([["play",()=>{T.log("mediaSession: Play button clicked"),this.$_player.playVideo()}],["pause",()=>{T.log("mediaSession: Pause button clicked."),this.pauseVideo()}],["stop",()=>{T.log("mediaSession: Stop button clicked."),this.$_player.stopVideo()}],["seekbackward",details=>{T.log("mediaSession: Seek backwards");var e=details.seekOffset||10,t=Math.max(this.$_player.currentTime-e,0);this.$_player.seekTo(t)}],["seekforward",details=>{T.log("mediaSession: Seek forwards");var e=details.seekOffset||10,t=Math.min(this.$_player.currentTime+e,parseFloat(this.$video.getDuration(this.video)));this.$_player.seekTo(t)}],["seekto",details=>{T.log("mediaSession: Seek to ".concat(details.seekTime.toString())),this.$_player.seekTo(details.seekTime)}]]);for(var[t,o]of e)try{navigator.mediaSession.setActionHandler(t,o)}catch(e){T.log('The media session action "'.concat(t,'" is not supported yet.'))}}}};Object(l.c)([Object(r.Prop)({default:!1,type:Boolean}),Object(l.f)("design:type",Boolean)],A.prototype,"autoplay",void 0),Object(l.c)([Object(r.Prop)({default:!0,type:Boolean}),Object(l.f)("design:type",Boolean)],A.prototype,"initializeOnLoad",void 0),Object(l.c)([Object(r.Prop)({default:!1,type:Boolean}),Object(l.f)("design:type",Boolean)],A.prototype,"lazy",void 0),Object(l.c)([Object(r.Prop)({default:()=>{},type:Object}),Object(l.f)("design:type",Object)],A.prototype,"video",void 0),Object(l.c)([Object(r.Prop)({default:!1}),Object(l.f)("design:type",Boolean)],A.prototype,"preloadTitlePanel",void 0),Object(l.c)([Object(r.Prop)({default:"",type:String}),Object(l.f)("design:type",String)],A.prototype,"videoArtistName",void 0),Object(l.c)([Object(r.Watch)("video"),Object(l.f)("design:type",Function),Object(l.f)("design:paramtypes",[Object,Object]),Object(l.f)("design:returntype",void 0)],A.prototype,"onVideoChanged",null);var W=A=Object(l.c)([Object(r.Component)({components:{AvPluginsTitlePanel:P},mixins:[v.a]})],A),_=(o(1471),Object(f.a)(W,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.enabled?o("div",[e.$store.hasModule("format")&&e.$store.getters["format/isAmp"]?o("div",{staticClass:"c-avVideo"},[e.video?o("amp-video-iframe",{staticClass:"g-outer-spacing-bottom-medium",attrs:{src:e.localePath({name:"video_share_amp",params:{slug:e.video.slug}}),poster:e.posterImage,width:"500",height:"281",layout:"responsive"}}):e._e()],1):e.video?o("div",{staticClass:"c-avVideo o-ratio o-ratio-wide",attrs:{id:e.playerId}},[o("div",{staticClass:"o-ratio_content"},[e._m(0),e._v(" "),e._t("default-panels",(function(){return[e._t("unmute",(function(){return[e.showUnmuteButton?o("div",{staticClass:"c-avVideo_unmute g-color-white",on:{click:e.unmuteVideo}},[o("div",{staticClass:"c-avVideo_unmute_icon"}),e._v(" "),o("span",{attrs:{"data-role":"label"}},[e._v("Click to unmute")])]):e._e()]})),e._v(" "),e._t("titlePanel",(function(){return[e.showTitlePanel?o("AvPluginsTitlePanel",{attrs:{video:e.video,"preload-image":e.preloadTitlePanel},on:{click:e.playVideo}}):e._e()]}),{playVideo:e.playVideo,showTitlePanel:e.showTitlePanel,video:e.video,preloadTitlePanel:e.preloadTitlePanel}),e._v(" "),e._t("titleOverlay",(function(){return[e.showTitleOverlay?o("div",{staticClass:"c-avVideo_title g-text-large"},[e._v(e._s(e.videoHeadline))]):e._e()]}))]})),e._v(" "),e._t("panels")],2)]):e._e()]):e._e()}),[function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{ref:"videoContainer",staticClass:"video-container uvpjs--controlbar-hidden",attrs:{id:e.containerId}})}],!1,null,null,null));t.a=_.exports},1324:function(e,t,o){},1325:function(e,t,o){},1469:function(e,t,o){"use strict";o(1324)},1470:function(e,t,o){var d=o(792);o(21),o(32);var n,l={},r=!1;function c(t,o,d,n,r,c){return null==l[t]&&(l[t]={target:null,lastEvent:{},timeWatched:0,eventTypes:d,interval:null,percentWatched:0,lastVol:0,muted:!1,inView:!1,autostart:r,isFullscreen:!1,placement:n,adsEnabled:c}),o?new YT.Player("iframe-".concat(t),{playerVars:{listType:"playlist",list:t,rel:0},host:"https://www.youtube.com",events:{onReady:v,onStateChange:y}}):new YT.Player("iframe-".concat(t),{videoId:t,playerVars:{modestbranding:1,rel:0},host:"https://www.youtube.com",events:{onReady:v,onStateChange:y}}),["","webkit","moz","ms"].forEach((e=>document.addEventListener(e+"fullscreenchange",(function(){null===document.fullscreenElement?l[t].isFullscreen=!1:document.fullscreenElement.id.includes(t)&&(l[t].isFullscreen=!l[t].isFullscreen)}),!1))),window.onscroll=function(){for(var t in l)if(l[t].target){var o=document.getElementById("iframe-".concat(t)),d=o.getBoundingClientRect();d.top-d.height<=0&&d.top+d.height>0&&!1===l[t].inView?(l[t].inView=!0,o.dispatchEvent(new CustomEvent("stateChange-".concat(t),{detail:{payload:{"@type":"core.videoViewed.v1",videoContext:e.exports.getVideoContext(l[t].target)}}}))):(d.top+d.height<=0||d.top-d.height>0)&&!0===l[t].inView&&(l[t].inView=!1)}},document.getElementById("iframe-".concat(t))}function v(t){var o=t.target.playerInfo.playlistId?t.target.playerInfo.playlistId:t.target.playerInfo.videoData.video_id,d=document.getElementById("iframe-".concat(o));l[o].target=t.target,l[o].autostart&&t.target.playVideo(),d.dispatchEvent(new CustomEvent("stateChange-".concat(o),{detail:{payload:{"@type":"core.videoLoaded.v1",videoContext:e.exports.getVideoContext(t.target)}}}))}function y(t){t.target.playerInfo.currentTime;var o,d=t.target.playerInfo.playlistId?t.target.playerInfo.playlistId:t.target.playerInfo.videoData.video_id,n=document.getElementById("iframe-".concat(d)),r=l[d].eventTypes,c=l[d].lastEvent;1!==t.data&&null!==l[d].interval&&clearInterval(l[d].interval),0===t.data&&r.includes("completed")?o="videoCompleted":1===t.data?(l[d].lastVol=t.target.playerInfo.volume,l[d].muted=t.target.isMuted(),l[d].interval=setInterval((function(){!function(t,o){var d=document.getElementById("iframe-".concat(o));if(l[o].eventTypes.includes("watched")){l[o].timeWatched+=1;var n=t.target.playerInfo.duration,r=t.target.playerInfo.currentTime;r>=n-3&&l[o].percentWatched<100?(d.dispatchEvent(new CustomEvent("stateChange-".concat(o),{detail:{payload:{"@type":"core.videoWatched.v1",videoContext:e.exports.getVideoContext(t.target),videoWatched:100,videoWatchedTime:Math.floor(l[o].timeWatched)}}})),l[o].percentWatched=100):r>=n*(3/4)&&l[o].percentWatched<75?(d.dispatchEvent(new CustomEvent("stateChange-".concat(o),{detail:{payload:{"@type":"core.videoWatched.v1",videoContext:e.exports.getVideoContext(t.target),videoWatched:75,videoWatchedTime:Math.floor(l[o].timeWatched)}}})),l[o].percentWatched=75):r>=n/2&&l[o].percentWatched<50?(d.dispatchEvent(new CustomEvent("stateChange-".concat(o),{detail:{payload:{"@type":"core.videoWatched.v1",videoContext:e.exports.getVideoContext(t.target),videoWatched:50,videoWatchedTime:Math.floor(l[o].timeWatched)}}})),l[o].percentWatched=50):r>=n/4&&l[o].percentWatched<25&&(d.dispatchEvent(new CustomEvent("stateChange-".concat(o),{detail:{payload:{"@type":"core.videoWatched.v1",videoContext:e.exports.getVideoContext(t.target),videoWatched:25,videoWatchedTime:Math.floor(l[o].timeWatched)}}})),l[o].percentWatched=25)}l[o].eventTypes.includes("volume")&&(l[o].muted===t.target.isMuted()&&l[o].lastVol===t.target.playerInfo.volume||(d.dispatchEvent(new CustomEvent("stateChange-".concat(o),{detail:{payload:{"@type":"core.videoVolumeChanged.v1",videoContext:e.exports.getVideoContext(t.target),videoMuted:t.target.isMuted()}}})),l[o].lastVol=t.target.playerInfo.volume,l[o].muted=t.target.isMuted()))}(t,d)}),1e3),"videoSeekStarted"===c.type||t.target.playerInfo.currentTime-c.videoTime>1&&r.includes("seek")?(l[d].timeWatched-c.videoTime>0&&(l[d].timeWatched=l[d].timeWatched-(l[d].timeWatched-c.videoTime)),o="videoSeekCompleted"):r.includes("playing")&&(o="notStarted"===l[d].lastEvent.type?"videoStarted":"videoPlayed")):2===t.data?0!=c.eventTime&&Math.abs(.001*(Date.now()-c.eventTime)-(t.target.playerInfo.currentTime-c.videoTime))<2&&r.includes("paused")?o="videoPaused":r.includes("seek")&&(o="videoSeekStarted"):3===t.data?"notStarted"!==c.type&&"videoSeekStarted"!==c.type&&(o="videoInterrupted"):-1===t.data&&(l[d].lastEvent={type:"notStarted",eventTime:Date.now(),videoTime:t.target.playerInfo.currentTime}),void 0!==o&&(l[d].lastEvent={type:o,eventTime:Date.now(),videoTime:t.target.playerInfo.currentTime},n.dispatchEvent(new CustomEvent("stateChange-".concat(d),{detail:{payload:{"@type":"core."+o+".v1",videoContext:e.exports.getVideoContext(t.target)}}})),"videoCompleted"===o&&(l[d].timeWatched=0,l[d].interval=null,l[d].percentWatched=0,l[d].lastEvent={}))}function m(t){t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoVolumeChanged.v1",videoContext:e.exports.getJWVideoContext(t)}}}))}function h(t,o,d){var n=window.uvpjs.getVideoManager().VCIs[t];if(n){var r={"@type":"core.".concat(o),videoContext:e.exports.getUVPVideoContext(t)},c=o.toLowerCase();c.includes("videoad")&&(null!=l[t].adData.videoAdTitle?(r.videoAdContext={videoAdId:l[t].adData.videoAdId,videoAdTitle:l[t].adData.videoAdTitle,adRollPosition:l[t].adData.adRollPosition},null!=l[t].adData.adSkippable?r.videoAdContext.adSkippable=l[t].adData.adSkippable:null!=d&&null!=d.payload.adData&&null!=d.payload.imaAdData&&(l[t].adData.adSkippable=d.payload.imaAdData.skipTimeOffset>-1,r.videoAdContext.adSkippable=d.payload.imaAdData.skipTimeOffset>-1)):null!=d&&null!=d.payload.adData&&(r.videoAdContext={videoAdId:d.payload.adData.adVideoId?d.payload.adData.adVideoId:null,videoAdTitle:d.payload.adData.adVideoTitle?d.payload.adData.adVideoTitle:null,adRollPosition:d.payload.adData.adType?d.payload.adData.adType.charAt(0).toUpperCase()+d.payload.adData.adType.slice(1):null},null!=d.payload.imaAdData&&(r.videoAdContext.adSkippable=d.payload.imaAdData.skipTimeOffset>-1),l[t].adData=r.videoAdContext)),c.includes("volume")?(c.includes("videoad")?r.videoAdMuted=n.getPlayerMuted():r.videoMuted=n.getPlayerMuted(),r.previousVolumeLevel=l[t].previousVolumeLevel,l[t].previousVolumeLevel=n.getPlayerMuted()?0:Math.round(100*n.getVolume())):c.includes("interrupted")?r.method=d.payload.errorInfo.message?d.payload.errorInfo.message:"":c.includes("paused")?(r.pauseType=d.payload.autoPause?"auto":"manual",c.includes("videoAd")&&(r.autostart=n._autoPlay)):c.includes("played")||c.includes("seekstarted")&&(r.videoContext.playheadPosition=Math.ceil(d.payload.seekFromTime)),document.getElementById(t).dispatchEvent(new CustomEvent("stateChange-".concat(t),{detail:{payload:r}}))}}e.exports.createVideoPlayer=function(){var e=d((function*(e,t,o,d,n,l){0==o.length&&(o=["playing","paused","completed","seek","volume","watched","interrupted","ad"]);var v=yield function(e,t,o,d,n,l){return new Promise(((v,y)=>{(r||document.querySelectorAll('script[src="https://www.youtube.com/iframe_api"]').length>0)&&v(c(e,t,o,d,n,l));var m=document.createElement("script");m.src="https://www.youtube.com/iframe_api";var h=document.getElementsByTagName("script")[0];h.parentNode.insertBefore(m,h),window.addEventListener("youtube_ready",(function(){v(c(e,t,o,d,n,l))})),window.onYouTubeIframeAPIReady=function(){r=!0;var e=new Event("youtube_ready");window.dispatchEvent(e)},setTimeout((()=>{r||(r=!0,y(new Error("Iframe is not ready")))}),1e4)}))}(e,t,o,d,n,l);return v}));return function(t,o,d,n,l,r){return e.apply(this,arguments)}}(),e.exports.getVideoContext=e=>{var t=e.playerInfo.playlistId?e.playerInfo.playlistId:e.playerInfo.videoData.video_id;return{videoId:e.playerInfo.videoData.video_id,videoTitle:e.playerInfo.videoData.title,sequenceType:e.playerInfo.playlistId?"playlist":"single",playlistId:e.playerInfo.playlistId?e.playerInfo.videoData.playlistId:"",playlistTitle:e.playerInfo.playlistTitle?e.playerInfo.videoData.playlistTitle:"",playlistIndex:e.playerInfo.playlistIndex?e.playerInfo.playlistIndex:0,videoPlayer:"Youtube",videoLength:Math.round(e.playerInfo.duration),playheadPosition:Math.round(e.playerInfo.currentTime),volumeLevel:e.isMuted()?0:e.playerInfo.volume,videoQuality:e.playerInfo.playbackQuality,fullScreenEnabled:l[t].isFullscreen,adEnabled:!(!l[t].adsEnabled||l[t].autostart),brand:l[t].placement.brand?l[t].placement.brand:"",category:l[t].placement.category?l[t].placement.category:"",productId:l[t].placement.productId?l[t].placement.productId:"",location:l[t].placement.location?l[t].placement.location:"",articlePlacement:l[t].placement.articlePlacement?l[t].placement.articlePlacement:"",autoplay:l[t].autostart,name:l[t].placement.name?l[t].placement.name:""}},e.exports.trackJWPlayer=(t,o,d,n,r)=>{0==o.length&&(o=["playing","paused","completed","seek","volume","watched","interrupted","ad"]),t.on("beforePlay",(e=>{var o=t.getPlaylistItem().mediaid;null==l[o]&&(l[o]={type:"",timeWatched:0,percentWatched:0,autostart:n,placement:d,quality:null,timeSkipped:0,seekStart:0,lastEvent:"",adsEnabled:r})})),t.on("playlistItem",(o=>{var c=t.getPlaylistItem().mediaid;null==l[c]&&(l[c]={type:"",timeWatched:0,percentWatched:0,autostart:n,placement:d,quality:null,timeSkipped:0,seekStart:0,lastEvent:"",adsEnabled:r}),function(t){t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoLoaded.v1",videoContext:e.exports.getJWVideoContext(t)}}}))}(t)})),o.includes("playing")&&t.on("play",(o=>{!function(t){l[t.getPlaylistItem().mediaid].lastEvent="play",t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoPlayed.v1",videoContext:e.exports.getJWVideoContext(t)}}}))}(t)})),o.includes("paused")&&t.on("pause",(o=>{!function(t){l[t.getPlaylistItem().mediaid].lastEvent="pause",t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoPaused.v1",videoContext:e.exports.getJWVideoContext(t)}}}))}(t)})),o.includes("completed")&&t.on("complete",(o=>{!function(t){l[t.getPlaylistItem().mediaid].lastEvent="completed",t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoCompleted.v1",videoContext:e.exports.getJWVideoContext(t)}}}))}(t)})),o.includes("seek")&&(t.on("seek",(o=>{!function(t){l[t.getPlaylistItem().mediaid].lastEvent="seek",l[t.getPlaylistItem().mediaid].seekStart=t.getPosition(),t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoSeekStarted.v1",videoContext:e.exports.getJWVideoContext(t)}}}))}(t)})),t.on("seeked",(o=>{!function(t){l[t.getPlaylistItem().mediaid].lastEvent="seek",l[t.getPlaylistItem().mediaid].timeSkipped=Math.round(t.getPosition()-l[t.getPlaylistItem().mediaid].seekStart),t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoSeekCompleted.v1",videoContext:e.exports.getJWVideoContext(t)}}}))}(t)}))),o.includes("volume")&&(t.on("mute",(e=>{m(t)})),t.on("volume",(e=>{m(t)}))),o.includes("watched")&&t.on("time",(o=>{!function(t){var o=t.getPlaylistItem().mediaid,d=t.getPlaylistItem().feedid,n=t.getDuration(),r=t.getPosition();r>=n-3&&l[o].percentWatched<100?(l[o].percentWatched=100,t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(d),{detail:{payload:{"@type":"core.videoWatched.v1",videoContext:e.exports.getJWVideoContext(t),videoWatched:100,videoWatchedTime:Math.round(r-l[o].timeSkipped)}}}))):r>=.75*n&&l[o].percentWatched<75?(l[o].percentWatched=75,t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(d),{detail:{payload:{"@type":"core.videoWatched.v1",videoContext:e.exports.getJWVideoContext(t),videoWatched:75,videoWatchedTime:Math.round(r-l[o].timeSkipped)}}}))):r>=.5*n&&l[o].percentWatched<50?(l[o].percentWatched=50,t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(d),{detail:{payload:{"@type":"core.videoWatched.v1",videoContext:e.exports.getJWVideoContext(t),videoWatched:50,videoWatchedTime:Math.round(r-l[o].timeSkipped)}}}))):r>=.25*n&&l[t.getPlaylistItem().mediaid].percentWatched<25&&(l[o].percentWatched=25,t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(d),{detail:{payload:{"@type":"core.videoWatched.v1",videoContext:e.exports.getJWVideoContext(t),videoWatched:25,videoWatchedTime:Math.round(r-l[o].timeSkipped)}}})))}(t)})),o.includes("interrupted")&&t.on("firstFrame",(o=>{!function(t){t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoStarted.v1",videoContext:e.exports.getJWVideoContext(t)}}}))}(t),t.on("buffer",(o=>{!function(t,o){"play"===l[t.getPlaylistItem().mediaid].lastEvent&&t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoInterrupted.v1",videoContext:e.exports.getJWVideoContext(t),method:o.reason}}}))}(t,o)}))})),o.includes("ad")&&(t.on("adRequest",(o=>{!function(t){t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoAdRequested.v1",videoContext:e.exports.getJWVideoContext(t)}}}))}(t)})),t.on("adStarted",(o=>{!function(t){t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoAdStarted.v2",videoContext:e.exports.getJWVideoContext(t)}}}))}(t)})),t.on("adPause",(o=>{!function(t){t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoAdPaused.v2",videoContext:e.exports.getJWVideoContext(t)}}}))}(t)})),t.on("adComplete",(o=>{!function(t){t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoAdCompleted.v2",videoContext:e.exports.getJWVideoContext(t)}}}))}(t)})),t.on("adSkipped",(o=>{!function(t){t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoAdSkipped.v2",videoContext:e.exports.getJWVideoContext(t)}}}))}(t)})),t.on("adTime",(o=>{!function(t){t.on("viewable",(o=>{!function(t){t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoAdViewed.v1",videoContext:e.exports.getJWVideoContext(t)}}}))}(t)})),t.on("volume",(o=>{!function(t){t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoAdVolumeChanged.v1",videoContext:e.exports.getJWVideoContext(t)}}}))}(t)})),t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoAdWatched.v1",videoContext:e.exports.getJWVideoContext(t)}}}))}(t)})),t.on("adSchedule",(o=>{!function(t){t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoAdLoaded.v1",videoContext:e.exports.getJWVideoContext(t)}}}))}(t)}))),t.on("visualQuality",(e=>{l[t.getPlaylistItem().mediaid].quality=t.getVisualQuality()})),t.on("viewable",(o=>{!function(t){t.getContainer().dispatchEvent(new CustomEvent("stateChange-".concat(t.getPlaylistItem().feedid),{detail:{payload:{"@type":"core.videoViewed.v1",videoContext:e.exports.getJWVideoContext(t)}}}))}(t)}))},e.exports.getJWVideoContext=e=>{var t=e.getPlaylistItem(),o=t.mediaid;return{videoId:o,videoTitle:t.title,sequenceType:t.feedData.feedid?"playlist":"single",playlistId:t.feedData.feedid?t.feedData.feedid:"",playlistTitle:t.feedData.feedid?t.feedData.title:"",playlistIndex:e.getPlaylistIndex(),videoPlayer:e.getProvider().name,videoLength:t.duration,playheadPosition:Math.round(e.getPosition()),volumeLevel:e.getMute()?0:e.getVolume(),videoQuality:null!=e.getVisualQuality()?e.getVisualQuality().level.label:l[o].quality,fullScreenEnabled:e.getFullscreen(),adEnabled:!l[o].adsEnabled,brand:l[o].placement.brand?l[o].placement.brand:"",category:l[o].placement.category?l[o].placement.category:"",productId:l[o].placement.productId?l[o].placement.productId:"",location:l[o].placement.location?l[o].placement.location:"",articlePlacement:l[o].placement.articlePlacement?l[o].placement.articlePlacement:"",name:l[o].placement.name?l[o].placement.name:"",bitRate:null!=e.getVisualQuality()?e.getVisualQuality().level.bitrate:l[o].quality}},e.exports.trackUVP=t=>{var o=window.uvpjs.getVideoManager().VCIs[t];l[t]={timeSkipped:0,interval:null,percentWatched:0,previousVolumeLevel:o.getPlayerMuted()?0:Math.round(100*o.getVolume()),metadata:{},adData:{},isAd:!1},function(e){n=new IntersectionObserver(((t,o)=>{t.forEach((t=>{t.isIntersecting&&(l[e].isAd?h(e,"videoAdViewed.v2"):h(e,"videoViewed.v1"))}))}));var t=document.getElementById(e);n.observe(t)}(t),o.addEventListener("contextMetadata.trackUVP"+t,(e=>{l[t].metadata=e.payload.contextMetadata})),o.addEventListener("onAdRequest.trackUVP"+t,(e=>{h(t,"videoAdRequested.v1",e)})),o.addEventListener("onAdLoaded.trackUVP"+t,(e=>{h(t,"videoAdLoaded.v2",e)})),o.addEventListener("onAdStart.trackUVP"+t,(e=>{l[t].isAd=!0,h(t,"videoAdStarted.v3",e)})),o.addEventListener("onAdSkipped.trackUVP"+t,(e=>{h(t,"videoAdSkipped.v3",e)})),o.addEventListener("onAdEnd.trackUVP"+t,(e=>{!function(e,t){var o=window.uvpjs.getVideoManager().VCIs[t];clearInterval(l[t].interval),100===l[t].percentWatched&&h(t,"videoAdCompleted.v3",e);l[t]={timeSkipped:0,interval:null,percentWatched:0,previousVolumeLevel:o.getPlayerMuted()?0:Math.round(100*o.getVolume()),metadata:{},adData:{},isAd:!1}}(e,t)})),o.addEventListener("onStateChange.trackUVP"+t,(d=>{switch(1!==d.payload.newState&&null!==l[t].interval&&clearInterval(l[t].interval),d.payload.newState){case 0:d.payload.isAd||(h(t,"videoCompleted.v1",d),l[t]={timeSkipped:0,interval:null,percentWatched:0,previousVolumeLevel:o.getPlayerMuted()?0:Math.round(100*o.getVolume()),metadata:{},adData:{},isAd:!1});break;case 1:l[t].interval=setInterval((function(){!function(t,o){var d=document.getElementById(t),n=window.uvpjs.getVideoManager().VCIs[t],r="videoWatched",c={};o&&(r="videoAdWatched",c=l[t].adData);var v=n.getCurrentPlaybackState().duration,y=n.getCurrentPlaybackState().currentTime,m=l[t].timeSkipped>0?n.getCurrentPlaybackState().currentTime-l[t].timeSkipped:n.getCurrentPlaybackState().currentTime;y>=v-3&&l[t].percentWatched<100?(o?d.dispatchEvent(new CustomEvent("stateChange-".concat(t),{detail:{payload:{"@type":"core."+r+".v2",videoContext:e.exports.getUVPVideoContext(t),videoAdContext:c,videoAdWatched:100,videoAdWatchedTime:Math.floor(m)}}})):d.dispatchEvent(new CustomEvent("stateChange-".concat(t),{detail:{payload:{"@type":"core."+r+".v1",videoContext:e.exports.getUVPVideoContext(t),videoWatched:100,videoWatchedTime:Math.floor(m)}}})),l[t].percentWatched=100):y>=v*(3/4)&&l[t].percentWatched<75?(o?d.dispatchEvent(new CustomEvent("stateChange-".concat(t),{detail:{payload:{"@type":"core."+r+".v2",videoContext:e.exports.getUVPVideoContext(t),videoAdContext:c,videoAdWatched:75,videoAdWatchedTime:Math.floor(m)}}})):d.dispatchEvent(new CustomEvent("stateChange-".concat(t),{detail:{payload:{"@type":"core."+r+".v1",videoContext:e.exports.getUVPVideoContext(t),videoWatched:75,videoWatchedTime:Math.floor(m)}}})),l[t].percentWatched=75):y>=v/2&&l[t].percentWatched<50?(o?d.dispatchEvent(new CustomEvent("stateChange-".concat(t),{detail:{payload:{"@type":"core."+r+".v2",videoContext:e.exports.getUVPVideoContext(t),videoAdContext:c,videoAdWatched:50,videoAdWatchedTime:Math.floor(m)}}})):d.dispatchEvent(new CustomEvent("stateChange-".concat(t),{detail:{payload:{"@type":"core."+r+".v1",videoContext:e.exports.getUVPVideoContext(t),videoWatched:50,videoWatchedTime:Math.floor(m)}}})),l[t].percentWatched=50):y>=v/4&&l[t].percentWatched<25&&(o?d.dispatchEvent(new CustomEvent("stateChange-".concat(t),{detail:{payload:{"@type":"core."+r+".v2",videoContext:e.exports.getUVPVideoContext(t),videoAdContext:c,videoAdWatched:25,videoAdWatchedTime:Math.floor(m)}}})):d.dispatchEvent(new CustomEvent("stateChange-".concat(t),{detail:{payload:{"@type":"core."+r+".v1",videoContext:e.exports.getUVPVideoContext(t),videoWatched:25,videoWatchedTime:Math.floor(m)}}})),l[t].percentWatched=25)}(t,d.payload.isAd)}),1e3),d.payload.isAd||h(t,"videoPlayed.v1",d)}})),o.addEventListener("seekDone.trackUVP"+t,(e=>{!function(e,t){l[t].timeSkipped+=e.payload.seekToTime-e.payload.seekFromTime,h(t,"videoSeekStarted.v1",e),h(t,"videoSeekCompleted.v1",e)}(e,t)})),o.addEventListener("videoPlaybackError.trackUVP"+t,(e=>{h(t,"videoInterrupted.v1",e)})),o.addEventListener("onContentStart.trackUVP"+t,(e=>{l[t].isAd=!1,h(t,"videoStarted.v1",e)})),o.addEventListener("onContentDataLoaded.trackUVP"+t,(e=>{h(t,"videoLoaded.v1",e)})),o.addEventListener("controlPause.trackUVP"+t,(e=>{l[t].isAd?h(t,"videoAdPaused.v3",e):h(t,"videoPaused.v1",e)})),o.addEventListener("controlVolumeChange.trackUVP"+t,(e=>{h(t,"videoVolumeChanged.v1",e)})),o.addEventListener("onAdVolumeChange.trackUVP"+t,(e=>{h(t,"videoAdVolumeChanged.v2",e)}))},e.exports.getUVPVideoContext=e=>{var t,o,d,n=window.uvpjs.getVideoManager().VCIs[e],r=null===(t=window.uvpjs)||void 0===t||null===(o=t.getVideoManager())||void 0===o||null===(d=o.VCIs[e])||void 0===d?void 0:d.getContentVideoData(),c=null==r?void 0:r.cmsRefGuid,v=[];return void 0!==window.utag_data&&Array.isArray(window.utag_data.tagSlugs)&&window.utag_data.tagSlugs.forEach((e=>{v.push({key:"utag",value:e})})),{videoId:c,videoTitle:null==r?void 0:r.videoTitle,sequenceType:n.rcoIdIndex>1?"playlist":"single",videoPlayer:"UVP",videoLength:Math.ceil(n.getContentVideoData().duration),playheadPosition:Math.ceil(n.getCurrentPlaybackState().currentTime),volumeLevel:n.getPlayerMuted()?0:Math.round(100*n.getVolume()),fullScreenEnabled:!(!document.fullscreenElement||!document.fullscreenElement.classList.contains("uvpjs")),livestream:n.getCurrentPlaybackState().isPlayingLive,brand:l[e].metadata.topicPrimaryId?l[e].metadata.topicPrimaryId:"",category:l[e].metadata.siteHier?l[e].metadata.siteHier:"",bitRate:n.getCurrentPlaybackState().facadeState?n.getCurrentPlaybackState().facadeState.currentBitrate:null,frameRate:n.getCurrentPlaybackState().facadeState?n.getCurrentPlaybackState().facadeState.playbackFramerate:null,autoplay:n._autoPlay,tags:v.length>0?v:null}},e.exports.removeUVPTracking=e=>{var t=window.uvpjs.getVideoManager().VCIs[e];clearInterval(l[e].interval),n.disconnect();["contextMetadata.trackUVP","onAdRequest.trackUVP","onAdLoaded.trackUVP","onAdStart.trackUVP","onAdSkipped.trackUVP","onAdEnd.trackUVP","onStateChange.trackUVP","seekDone.trackUVP","videoPlaybackError.trackUVP","onContentStart.trackUVP","onContentDataLoaded.trackUVP","controlPause.trackUVP","controlVolumeChange.trackUVP","onAdVolumeChange.trackUVP"].forEach((o=>{t.removeEventListener(o+e)}))}},1471:function(e,t,o){"use strict";o(1325)}}]);
//# sourceMappingURL=1dbe183.modern.js.map